好的。下面是“代币 + 全部合约 + 新版平台”一站式部署清单（按先后顺序），你只需在 Replit 执行即可。

### 1) 必备信息与 Secrets（Replit Secrets）
- 区块链/RPC
  - AGENTKIT_DEFAULT_CHAIN: base-sepolia 或 base
  - BASE_RPC_URL: 如 `https://sepolia.base.org` 或主网 RPC
  - VITE_BASE_RPC_URL: 同上（前端）
- CDP/AgentKit
  - CDP_API_KEY_NAME
  - CDP_API_KEY_PRIVATE_KEY
  - CDP_WALLET_ADDRESS（便于日志/授权，可选）
- 钱包/部署者
  - DEPLOYER_PRIVATE_KEY（部署脚本用；仅 Replit 保存）
- 数据库（Neon）
  - DATABASE_URL（Drizzle）
- USDC/代币
  - USDC_TOKEN_ADDRESS（Base or Base Sepolia 上 USDC 地址）
- Stripe（如前端充值要用）
  - STRIPE_SECRET_KEY
  - STRIPE_WEBHOOK_SECRET（如有）
- 其他前端
  - VITE_CHAIN_ID（84532=Base Sepolia，8453=Base）
  - VITE_USDC_ADDRESS（同 USDC_TOKEN_ADDRESS）
  - VITE_TGESALE_ADDRESS（部署后回填）
  - VITE_POI_ADDRESS（部署后回填）
  - VITE_WALLETCONNECT_PROJECT_ID（如使用）
  - VITE_BASESCAN_URL（如 `https://sepolia.basescan.org`）

### 2) 合约部署顺序与参数
建议在 Replit Shell 执行（仅 Replit 执行部署）：
- npm ci
- npm run compile

按顺序部署（示例，实际以 `scripts/*` 为准），并记录每个地址：
1. POI（ERC20）
   - 构造参数：`name,symbol,initialOwner` 或符合你实现的构造
   - 记录：`POI_ADDRESS`
2. TGESale
   - 关键参数：`USDC_TOKEN_ADDRESS`、`POI_ADDRESS`、销售钱包（收款方）、时间窗、分层价格/额度
   - 记录：`TGESALE_ADDRESS`
3. StakingRewards
   - 关键参数：`POI_ADDRESS`、奖励速率、起止时间/可提规则
   - 记录：`STAKING_REWARDS_ADDRESS`
4. VestingVault（如有）
   - 关键参数：受益人、起始时间、持续时间、崖期
   - 记录：`VESTING_VAULT_ADDRESS`
5. MerkleAirdropDistributor（如有）
   - 关键参数：`POI_ADDRESS`、merkleRoot
   - 记录：`MERKLE_AIRDROP_ADDRESS`
6. EarlyBirdAllowlist（如有）
   - 关键参数：merkleRoot
   - 记录：`EARLY_BIRD_ALLOWLIST_ADDRESS`
7. ReferralRegistry（如有）
   - 记录：`REFERRAL_REGISTRY_ADDRESS`
8. AchievementBadges / ImmortalityBadge
   - 记录：`ACHIEVEMENT_BADGES_ADDRESS` / `IMMORTALITY_BADGE_ADDRESS`

把以上地址回填到：
- `shared/contracts/*.json` 对应 `address` 字段（POI/TGESale/StakingRewards/...）
- 前端 `.env` 的 `VITE_*`（POI/TGESale/USDC/Chain/RPC）

### 3) TGESale 前置授权（AgentKit 模式）
- 如果用 AgentKit 钱包代买 TGE（平台代办/自动化）：
  - 先给 CDP_WALLET_ADDRESS 做 USDC 授权到 `TGESALE_ADDRESS`
  - 方式 A：调用后端 `POST /api/contracts/USDC/approve`，body: `{ amount: "1000000000" }`（最小单位，例：1000 USDC=1000000000）
  - 方式 B：Replit 脚本执行 `USDC.approve(TGESale, amount)`

注：用户钱包模式会在前端自行授权，不需要这一步。

### 4) DEX 加池（可选）
- 执行 `scripts/add-liquidity-v2.ts`（或你的现有脚本）
  - 池子：`POI/USDC`
  - 初始价格与数量按你的经济模型
- 回填前端 Market 模块所需的池/路由器地址（如有）

### 5) 后端启动与数据库
- Replit 环境中设置 `DATABASE_URL`
- 运行迁移（在 Replit）：`npm run db:push`
- 确认后端启动正常（`server/index.ts` 监听端口日志）

### 6) 前端配置与上线
- 设置前端 `.env`（Replit 环境变量以 `VITE_` 开头）
  - `VITE_CHAIN_ID / VITE_BASE_RPC_URL / VITE_USDC_ADDRESS / VITE_TGESALE_ADDRESS / VITE_POI_ADDRESS`
- Replit 部署（Autoscale），访问域名自测
- 页面验证：
  - Immortality 页面：
    - “POI 购买（TGE）”：输入 USDC→授权→购买→返回 txHash
    - “POI 质押（Staking）”：质押/解押/领取奖励
  - 早鸟页：邮箱+钱包绑定提交流程正常
  - Profile：已绑定钱包展示与一键绑定
  - About：新版文案显示

### 7) 验收测试（合约联调）
- 只用用户钱包模式：
  - 购买流程：授权 USDC → `buyWithBaseToken` → 浏览器查看交易
  - 质押流程：`stake/withdraw/getReward` 正常
- AgentKit 模式（可选）：
  - 先 `POST /api/contracts/USDC/approve` 完成平台钱包授权
  - `POST /api/contracts/TGESale/purchase` 返回 txHash
- 只读接口：
  - `GET /api/tge/status?wallet=0x...` 查看 `isActive/currentTier/price/remaining/maxContribution`

### 8) 常见坑位
- 未回填 `shared/contracts/*.json` 地址 → 前端/后端都会报未部署
- USDC 地址错误（主网/测试网不一致）
- 销售时间窗未开放、额度未配置导致购买失败
- AgentKit 未配置 `CDP_API_KEY_*` 或 RPC 不可达
- 数据库 `DATABASE_URL` 未设置 `npm run db:push` 未执行

需要我把以上环境变量与地址回填清单生成一份清晰的 `.env.sample` 和 `DEPLOYMENT_CHECKLIST.md` 模板的话，告诉我“生成模板”，我给你可直接拷贝的内容。